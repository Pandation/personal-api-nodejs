{"version":3,"sources":["components/Typography/PageTitle.js","configs/modelSchemas.js","components/Table.js","pages/nailedIt/Companies.js"],"names":["PageTitle","children","className","experiencesSchema","bothLanguage","title","society","place","date","learningsSchema","name","educationsSchema","school","skillsSchema","text","stacks","file","undefined","url","schema","en","fr","companiesSchema","address","email","contactGender","contactLastname","contactFirstname","processesSchema","sendingConfigsSchema","company","process","status","customText","lastMailDate","nextMailDate","enabled","emailTemplatesSchema","subject","header","content","footer","DataTable","props","columns","map","column","i","key","data","document","toLowerCase","subKey","documentKey","languages","type","keys","to","_id","layout","size","aria-label","aria-hidden","onClick","deleteItem","totalResults","pagination","resultsPerPage","onChange","onPageChangeTable","label","CompaniesPage","dispatch","useDispatch","collection","useSelector","state","companies","useState","isFormOpen","setIsFormOpen","formValues","setFormValues","pageTable","setPageTable","dataTable","setDataTable","useEffect","Companies","getAll","items","length","updateValues","e","target","value","slice","iconLeft","EditIcon","gender","toUpperCase","create","fetching","loaded","p","id"],"mappings":"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","file":"static/js/8.dafed6ee.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nfunction PageTitle({ children }) {\r\n  return (\r\n    <h1 className=\"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200\">{children}</h1>\r\n  )\r\n}\r\n\r\nexport default PageTitle\r\n","//PORTFOLIO\r\n\r\nexport const experiencesSchema = bothLanguage({\r\n  title: \"\",\r\n  society: \"\",\r\n  place: \"\",\r\n  date: \"\",\r\n});\r\nexport const learningsSchema = {\r\n  name: \"\",\r\n};\r\nexport const educationsSchema = bothLanguage({\r\n  title: \"\",\r\n  school: \"\",\r\n  place: \"\",\r\n  date: \"\",\r\n});\r\nexport const skillsSchema = bothLanguage({\r\n  name: \"\",\r\n  text: \"\",\r\n});\r\nexport const projectsSchema = {\r\n  ...bothLanguage({\r\n    name: \"\",\r\n    stacks: [],\r\n    date: \"\",\r\n  }),\r\n  file: undefined,\r\n  url: \"\",\r\n};\r\n\r\nfunction bothLanguage(schema) {\r\n  return { en: { ...schema }, fr: { ...schema } };\r\n}\r\n\r\n//NAILED IT\r\nexport const companiesSchema = {\r\n  name: \"\",\r\n  address: \"\",\r\n  email: \"\",\r\n  contactGender: \"0\",\r\n  contactLastname: \"\",\r\n  contactFirstname: \"\",\r\n};\r\nexport const processesSchema = {\r\n  name: \"\",\r\n};\r\nexport const sendingConfigsSchema = {\r\n  company: \"\",\r\n  process: \"\",\r\n  status: \"\",\r\n  customText: \"\",\r\n  lastMailDate: \"\",\r\n  nextMailDate: \"\",\r\n  enabled: true,\r\n};\r\nexport const emailTemplatesSchema = {\r\n  name: \"\",\r\n  subject: \"\",\r\n  header: \"\",\r\n  content: \"\",\r\n  footer: \"\",\r\n  status: \"first\",\r\n  process: \"\",\r\n};\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport { EditIcon, TrashIcon } from \"../icons\";\r\nimport {\r\n  Table,\r\n  TableHeader,\r\n  TableCell,\r\n  TableBody,\r\n  TableRow,\r\n  TableFooter,\r\n  TableContainer,\r\n  Button,\r\n  Pagination,\r\n} from \"@windmill/react-ui\";\r\n\r\nconst DataTable = (props) => {\r\n  return (\r\n    <div className={props.className ?? \"\"}>\r\n      <TableContainer className=\"mb-8\">\r\n        <Table>\r\n          <TableHeader>\r\n            <tr>\r\n              {props.columns.map((column, i) => (\r\n                <TableCell key={i}>{column.name}</TableCell>\r\n              ))}\r\n              <TableCell>Actions</TableCell>\r\n            </tr>\r\n          </TableHeader>\r\n          <TableBody>\r\n            {props.data.map((document, i) => {\r\n              return (\r\n                <TableRow key={i}>\r\n                  {props.columns.map((column) => {\r\n                    let key = column.key ?? column.name.toLowerCase();\r\n                    let subKey = column.subKey ?? \"\";\r\n                    let documentKey = props.languages\r\n                      ? document.fr[key]\r\n                      : document[key];\r\n                    if (\r\n                      column.type === \"concat\" &&\r\n                      typeof column.keys !== \"undefined\"\r\n                    ) {\r\n                      documentKey = props.languages\r\n                        ? document.fr[column.keys[0]] +\r\n                          \" \" +\r\n                          document.fr[column.keys[1]]\r\n                        : document[column.keys[0]] +\r\n                          \" \" +\r\n                          document[column.keys[1]];\r\n                    }\r\n                    if (subKey) {\r\n                      documentKey = documentKey?.[subKey] ?? documentKey;\r\n                    }\r\n\r\n                    return (\r\n                      <TableCell key={`${column.name}_th`}>\r\n                        <div className=\"flex items-center text-sm\">\r\n                          <div>\r\n                            <p className=\"font-semibold\">{documentKey}</p>\r\n                          </div>\r\n                        </div>\r\n                      </TableCell>\r\n                    );\r\n                  })}\r\n                  <TableCell>\r\n                    <div className=\"flex items-center space-x-4\">\r\n                      <Link to={`/pf/educations/${document._id}`}>\r\n                        <Button layout=\"link\" size=\"icon\" aria-label=\"Edit\">\r\n                          <EditIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\r\n                        </Button>\r\n                      </Link>\r\n                      <Button\r\n                        layout=\"link\"\r\n                        size=\"icon\"\r\n                        aria-label=\"Delete\"\r\n                        onClick={props.deleteItem(document._id)}\r\n                      >\r\n                        <TrashIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\r\n                      </Button>\r\n                    </div>\r\n                  </TableCell>\r\n                </TableRow>\r\n              );\r\n            })}\r\n          </TableBody>\r\n        </Table>\r\n        <TableFooter>\r\n          <Pagination\r\n            totalResults={props.pagination.totalResults}\r\n            resultsPerPage={props.pagination.resultsPerPage}\r\n            onChange={props.pagination.onPageChangeTable}\r\n            label=\"Table navigation\"\r\n          />\r\n        </TableFooter>\r\n      </TableContainer>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DataTable;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport PageTitle from \"../../components/Typography/PageTitle\";\r\nimport Table from \"../../components/Table\";\r\nimport { Input, Label, Button, Select } from \"@windmill/react-ui\";\r\nimport { EditIcon } from \"../../icons\";\r\n\r\nimport { Companies } from \"../../redux/features/nailedIt/companies\";\r\nimport { companiesSchema } from \"../../configs/modelSchemas\";\r\n\r\nfunction CompaniesPage() {\r\n  const dispatch = useDispatch();\r\n  const collection = useSelector((state) => state.companies.collection);\r\n  const [isFormOpen, setIsFormOpen] = useState(false);\r\n  const [formValues, setFormValues] = useState(companiesSchema);\r\n\r\n  // setup pages control for every table\r\n  const [pageTable, setPageTable] = useState(1);\r\n  // setup data for every table\r\n  const [dataTable, setDataTable] = useState([]);\r\n\r\n  useEffect(() => {\r\n    dispatch(Companies.getAll());\r\n  }, [dispatch]);\r\n\r\n  // pagination setup\r\n  const resultsPerPage = 10;\r\n  const totalResults = collection.items.length;\r\n\r\n  // pagination change control\r\n  function onPageChangeTable(p) {\r\n    setPageTable(p);\r\n  }\r\n\r\n  const updateValues = (e) => {\r\n    setFormValues({\r\n      ...formValues,\r\n      [e.target.name]: e.target.value,\r\n    });\r\n  };\r\n\r\n  const deleteItem = (id) => {\r\n    return () => {\r\n      dispatch(Companies.deleteItem(id));\r\n    };\r\n  };\r\n\r\n  const save = () => {\r\n    dispatch(Companies.create(formValues));\r\n  };\r\n\r\n  //populate table data when mounted and page changing\r\n  useEffect(() => {\r\n    if (collection.items.length > 0) {\r\n      setDataTable(\r\n        collection.items.slice(\r\n          (pageTable - 1) * resultsPerPage,\r\n          pageTable * resultsPerPage\r\n        )\r\n      );\r\n    }\r\n  }, [pageTable, collection.items]);\r\n\r\n  return (\r\n    <>\r\n      <PageTitle>Companies</PageTitle>\r\n      <div>\r\n        <Button\r\n          className=\"mb-5\"\r\n          iconLeft={EditIcon}\r\n          onClick={() => setIsFormOpen(!isFormOpen)}\r\n        >\r\n          {isFormOpen ? \"Fermer\" : \"Ajouter\"}\r\n        </Button>\r\n        {isFormOpen && (\r\n          <div className=\"flex flex-col\">\r\n            <div>\r\n              <div className=\"px-4 py-3 mb-2 bg-white rounded-lg shadow-md dark:bg-gray-800\">\r\n                <Label>\r\n                  <span>Name</span>\r\n                  <Input name=\"name\" className=\"mt-1\" onChange={updateValues} />\r\n                </Label>\r\n                <Label>\r\n                  <span>Address</span>\r\n                  <Input\r\n                    name=\"address\"\r\n                    className=\"mt-1\"\r\n                    onChange={updateValues}\r\n                  />\r\n                </Label>\r\n\r\n                <Label>\r\n                  <span>Email</span>\r\n                  <Input\r\n                    name=\"email\"\r\n                    className=\"mt-1\"\r\n                    type=\"email\"\r\n                    onChange={updateValues}\r\n                  />\r\n                </Label>\r\n                <Label>\r\n                  <span>Contact Gender</span>\r\n                  <Select\r\n                    className=\"mt-1\"\r\n                    name=\"contactGender\"\r\n                    onChange={updateValues}\r\n                  >\r\n                    {[\"none\", \"female\", \"male\"].map((gender, i) => (\r\n                      <option key={\"gender_\" + gender} value={i}>\r\n                        {gender.toUpperCase()}\r\n                      </option>\r\n                    ))}\r\n                  </Select>\r\n                </Label>\r\n                <Label>\r\n                  <span>Contact Firstname</span>\r\n                  <Input\r\n                    name=\"contactFirstname\"\r\n                    className=\"mt-1\"\r\n                    onChange={updateValues}\r\n                  />\r\n                </Label>\r\n                <Label>\r\n                  <span>Contact Lastname</span>\r\n                  <Input\r\n                    name=\"contactLastname\"\r\n                    className=\"mt-1\"\r\n                    onChange={updateValues}\r\n                  />\r\n                </Label>\r\n              </div>\r\n            </div>\r\n            <Button\r\n              className=\"mb-5 self-end\"\r\n              iconLeft={EditIcon}\r\n              onClick={save}\r\n            >\r\n              Ajouter\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {collection.fetching && <p>Chargement...</p>}\r\n      {collection.loaded && collection.items.length > 0 && (\r\n        <Table\r\n          columns={[\r\n            { name: \"Name\" },\r\n            { name: \"Address\" },\r\n            { name: \"Email\" },\r\n            { name: \"Contact Gender\", key: \"contactGender\" },\r\n            {\r\n              name: \"Contact Name\",\r\n              type: \"concat\",\r\n              keys: [\"contactFirstname\", \"contactLastname\"],\r\n            },\r\n          ]}\r\n          data={dataTable}\r\n          pagination={{\r\n            totalResults,\r\n            resultsPerPage,\r\n            onPageChangeTable,\r\n          }}\r\n          deleteItem={deleteItem}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default CompaniesPage;\r\n"],"sourceRoot":""}