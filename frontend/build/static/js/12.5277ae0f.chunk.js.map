{"version":3,"sources":["components/Typography/PageTitle.js","components/Typography/SectionTitle.js","configs/modelSchemas.js","pages/portfolio/Projects.js"],"names":["PageTitle","children","className","SectionTitle","experiencesSchema","bothLanguage","jobTitle","society","place","date","learningsSchema","name","educationsSchema","title","school","skillsSchema","text","projectsSchema","stacks","file","undefined","url","schema","en","fr","ProjectsPage","dispatch","useDispatch","useState","formValues","setFormValues","collection","useSelector","state","projects","isFormOpen","setIsFormOpen","pageTable","setPageTable","dataTable","setDataTable","useEffect","Projects","getAll","totalResults","items","length","updateValues","language","e","target","value","slice","iconLeft","EditIcon","onClick","placeholder","onChange","type","files","FORM_DATA","FormData","formKey","data","key","append","JSON","stringify","upload","fetching","loaded","map","document","i","console","log","to","_id","layout","size","aria-label","aria-hidden","id","deleteItem","resultsPerPage","p","label"],"mappings":"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","file":"static/js/12.5277ae0f.chunk.js","sourcesContent":["import React from 'react'\n\nfunction PageTitle({ children }) {\n  return (\n    <h1 className=\"my-6 text-2xl font-semibold text-gray-700 dark:text-gray-200\">{children}</h1>\n  )\n}\n\nexport default PageTitle\n","import React from 'react'\n\nfunction SectionTitle({ children }) {\n  return <h2 className=\"mb-4 text-lg font-semibold text-gray-600 dark:text-gray-300\">{children}</h2>\n}\n\nexport default SectionTitle\n","//PORTFOLIO\r\n\r\nexport const experiencesSchema = bothLanguage({\r\n  jobTitle: \"\",\r\n  society: \"\",\r\n  place: \"\",\r\n  date: \"\",\r\n});\r\nexport const learningsSchema = {\r\n  name: \"\",\r\n};\r\nexport const educationsSchema = bothLanguage({\r\n  title: \"\",\r\n  school: \"\",\r\n  place: \"\",\r\n  date: \"\",\r\n});\r\nexport const skillsSchema = bothLanguage({\r\n  name: \"\",\r\n  text: \"\",\r\n});\r\nexport const projectsSchema = {\r\n  ...bothLanguage({\r\n    name: \"\",\r\n    stacks: [],\r\n    date: \"\",\r\n  }),\r\n  file: undefined,\r\n  url: \"\",\r\n};\r\n\r\nfunction bothLanguage(schema) {\r\n  return { en: { ...schema }, fr: { ...schema } };\r\n}\r\n","import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nimport PageTitle from \"../../components/Typography/PageTitle\";\r\nimport {\r\n  Table,\r\n  TableHeader,\r\n  TableCell,\r\n  TableBody,\r\n  TableRow,\r\n  TableFooter,\r\n  TableContainer,\r\n  Input,\r\n  Label,\r\n  Button,\r\n  Pagination,\r\n} from \"@windmill/react-ui\";\r\nimport { EditIcon, TrashIcon } from \"../../icons\";\r\nimport SectionTitle from \"../../components/Typography/SectionTitle\";\r\n\r\nimport { Projects } from \"../../redux/features/portfolio/projects\";\r\n\r\nimport { projectsSchema } from \"../../configs/modelSchemas\";\r\n\r\nfunction ProjectsPage() {\r\n  const dispatch = useDispatch();\r\n  const [formValues, setFormValues] = useState(projectsSchema);\r\n  const collection = useSelector((state) => state.projects.collection);\r\n  const [isFormOpen, setIsFormOpen] = useState(false);\r\n  // setup pages control for every table\r\n  const [pageTable, setPageTable] = useState(1);\r\n  // setup data for every table\r\n  const [dataTable, setDataTable] = useState([]);\r\n\r\n  useEffect(() => {\r\n    dispatch(Projects.getAll());\r\n  }, [dispatch]);\r\n\r\n  // pagination setup\r\n  const resultsPerPage = 10;\r\n  const totalResults = collection.items.length;\r\n\r\n  // pagination change control\r\n  function onPageChangeTable(p) {\r\n    setPageTable(p);\r\n  }\r\n  const updateValues = (language = false) => {\r\n    if (!language) {\r\n      return (e) => setFormValues({ ...formValues, url: e.target.value });\r\n    }\r\n    return (e) =>\r\n      setFormValues({\r\n        ...formValues,\r\n        [language]: {\r\n          ...formValues[language],\r\n          [e.target.name]: e.target.value,\r\n        },\r\n      });\r\n  };\r\n  const updateUpload = (e) => {\r\n    const file = e.target.files[0];\r\n    setFormValues({ ...formValues, file });\r\n  };\r\n\r\n  const deleteItem = (id) => {\r\n    return () => {\r\n      dispatch(Projects.deleteItem(id));\r\n    };\r\n  };\r\n  const save = () => {\r\n    const FORM_DATA = new FormData();\r\n    for (const formKey in formValues) {\r\n      if (formKey === \"en\" || formKey === \"fr\") {\r\n        let data = {};\r\n        for (const key in formValues[formKey]) {\r\n          if (formValues[formKey][key] === \"\" || undefined) {\r\n            return;\r\n          }\r\n          data[key] = formValues[formKey][key];\r\n          FORM_DATA.append(key, JSON.stringify(data));\r\n        }\r\n      } else if (formKey === \"url\") {\r\n        FORM_DATA.append(formKey, formValues[formKey]);\r\n      }\r\n    }\r\n    dispatch(Projects.upload(FORM_DATA));\r\n  };\r\n  useEffect(() => {\r\n    if (collection.items.length > 0) {\r\n      setDataTable(\r\n        collection.items.slice(\r\n          (pageTable - 1) * resultsPerPage,\r\n          pageTable * resultsPerPage\r\n        )\r\n      );\r\n    }\r\n  }, [pageTable, collection.items]);\r\n\r\n  return (\r\n    <>\r\n      <PageTitle>Projects</PageTitle>\r\n      <div>\r\n        <Button\r\n          className=\"mb-5\"\r\n          iconLeft={EditIcon}\r\n          onClick={() => setIsFormOpen(!isFormOpen)}\r\n        >\r\n          {isFormOpen ? \"Fermer\" : \"Ajouter\"}\r\n        </Button>\r\n        {isFormOpen && (\r\n          <div className=\"flex flex-col px-4 py-3 mb-2 bg-white rounded-lg shadow-md dark:bg-gray-800\">\r\n            <div className=\"flex\">\r\n              <div className=\"flex-1 px-4 py-3 mb-2 bg-white rounded-lg shadow-md dark:bg-gray-800\">\r\n                <SectionTitle>Fran√ßais</SectionTitle>\r\n                <Label>\r\n                  <span>Name</span>\r\n                  <Input\r\n                    name=\"name\"\r\n                    className=\"mt-1\"\r\n                    placeholder=\"Crazy Party\"\r\n                    onChange={updateValues(\"fr\")}\r\n                  />\r\n                </Label>\r\n                <Label>\r\n                  <span>Stacks</span>\r\n                  <Input\r\n                    name=\"stacks\"\r\n                    className=\"mt-1\"\r\n                    placeholder=\"Stacks\"\r\n                    onChange={updateValues(\"fr\")}\r\n                  />\r\n                </Label>\r\n                <Label>\r\n                  <span>Date</span>\r\n                  <Input\r\n                    name=\"date\"\r\n                    className=\"mt-1\"\r\n                    placeholder=\"Novembre 2021\"\r\n                    onChange={updateValues(\"fr\")}\r\n                  />\r\n                </Label>\r\n              </div>\r\n              <div className=\"flex-1 px-4 py-3 mb-2 bg-white rounded-lg shadow-md dark:bg-gray-800\">\r\n                <SectionTitle>English</SectionTitle>\r\n                <Label>\r\n                  <span>Name</span>\r\n                  <Input\r\n                    name=\"name\"\r\n                    className=\"mt-1\"\r\n                    placeholder=\"Crazy Party\"\r\n                    onChange={updateValues(\"en\")}\r\n                  />\r\n                </Label>\r\n                <Label>\r\n                  <span>Stacks</span>\r\n                  <Input\r\n                    name=\"stacks\"\r\n                    className=\"mt-1\"\r\n                    placeholder=\"Stacks\"\r\n                    onChange={updateValues(\"en\")}\r\n                  />\r\n                </Label>\r\n                <Label>\r\n                  <span>Date</span>\r\n                  <Input\r\n                    name=\"date\"\r\n                    className=\"mt-1\"\r\n                    placeholder=\"Novembre 2021\"\r\n                    onChange={updateValues(\"en\")}\r\n                  />\r\n                </Label>\r\n              </div>\r\n            </div>\r\n            <Label>\r\n              <span>Image</span>\r\n              {/* <Input\r\n                name=\"url\"\r\n                className=\"mt-1\"\r\n                placeholder=\"Montpellier 34\"\r\n                onChange={updateValues()}\r\n              /> */}\r\n              <input type=\"file\" onChange={updateUpload} name=\"file\" />\r\n            </Label>\r\n            <Button\r\n              className=\"mb-5 self-end\"\r\n              iconLeft={EditIcon}\r\n              onClick={save}\r\n            >\r\n              Ajouter\r\n            </Button>\r\n          </div>\r\n        )}\r\n      </div>\r\n      {collection.fetching && <p>Chargement...</p>}\r\n      {collection.loaded && collection.items.length > 0 && (\r\n        <TableContainer className=\"mb-8\">\r\n          <Table>\r\n            <TableHeader>\r\n              <tr>\r\n                <TableCell>Name</TableCell>\r\n                <TableCell>Stacks</TableCell>\r\n                <TableCell>Date</TableCell>\r\n                <TableCell>Actions</TableCell>\r\n              </tr>\r\n            </TableHeader>\r\n            <TableBody>\r\n              {dataTable.map((document, i) => {\r\n                console.log(document);\r\n                return (\r\n                  <TableRow key={i}>\r\n                    <TableCell>\r\n                      <div className=\"flex items-center text-sm\">\r\n                        <div>\r\n                          <p className=\"font-semibold\">{document.fr.name}</p>\r\n                        </div>\r\n                      </div>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <span className=\"text-sm\">$ {document.fr.society}</span>\r\n                    </TableCell>\r\n                    <TableCell>{document.fr.stacks}</TableCell>\r\n                    <TableCell>\r\n                      <span className=\"text-sm\">{document.fr.date}</span>\r\n                    </TableCell>\r\n                    <TableCell>\r\n                      <div className=\"flex items-center space-x-4\">\r\n                        <Link to={`/pf/projects/${document._id}`}>\r\n                          <Button layout=\"link\" size=\"icon\" aria-label=\"Edit\">\r\n                            <EditIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\r\n                          </Button>\r\n                        </Link>\r\n                        <Button\r\n                          layout=\"link\"\r\n                          size=\"icon\"\r\n                          aria-label=\"Delete\"\r\n                          onClick={deleteItem(document._id)}\r\n                        >\r\n                          <TrashIcon className=\"w-5 h-5\" aria-hidden=\"true\" />\r\n                        </Button>\r\n                      </div>\r\n                    </TableCell>\r\n                  </TableRow>\r\n                );\r\n              })}\r\n            </TableBody>\r\n          </Table>\r\n          <TableFooter>\r\n            <Pagination\r\n              totalResults={totalResults}\r\n              resultsPerPage={resultsPerPage}\r\n              onChange={onPageChangeTable}\r\n              label=\"Table navigation\"\r\n            />\r\n          </TableFooter>\r\n        </TableContainer>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n\r\nexport default ProjectsPage;\r\n"],"sourceRoot":""}